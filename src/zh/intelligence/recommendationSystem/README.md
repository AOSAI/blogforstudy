---
title: 推荐系统基础 - 01
order: 0
author: AOSAI
date: 2023-09-27
category:
  - 推荐系统
tag:
  - 推荐系统

sticky: false # 此页面会在文章列表置顶
star: false # 此页面会出现在文章收藏中
footer: 等我攒够六便士，就去寻找月亮
copyright: AOSAI
---

## 一、推荐系统概念

个性化推荐（推荐系统）经历了多年的发展，已经成为互联网产品的标配，也是 AI 成功落地的分支之一，在电商（淘宝、京东）、资讯（今日头条、微博）、音乐（网易云音乐、QQ 音乐）、短视频（抖音、快手）等热门应用中，推荐系统都是核心组件之一。

- 推荐系统产生的背景

（1）信息过载。（2）用户需求不明确

1. 分类目录（1990 年代）：覆盖少量热门网站。 Hao123，Yahoo
2. 搜索引擎（2000 年代）：通过搜索词明确需求。 Googel，Baidu
3. 推荐系统（2010 年代）：不需要用户提供明确的需求，通过分析用户的历史行为给用户的兴趣进行建模，从而给用户推荐能够满足他们兴趣和需求的信息。

- 什么是推荐系统

没有明确需求的用户访问了我们的服务，且服务的物品对用户构成了信息过载，系统通过一定的规则对物品进行排序，并将排在前面的物品展示给用户，这样的系统就是推荐系统。

### 1.1 推荐系统 VS 搜索系统

|          | 搜索     | 推荐     |
| -------- | -------- | -------- |
| 行为方式 | 主动     | 被动     |
| 意图     | 明确     | 模糊     |
| 个性化   | 弱       | 强       |
| 流量分布 | 马太效应 | 长尾效应 |
| 目标     | 快速满足 | 持续服务 |
| 评估指标 | 简明     | 复杂     |

- 马太效应

马太效应是指，强者愈强，弱者愈弱，这样的一种现象。
在社会学家和经济学家的口中，反映着富的更富，穷的更穷，一种两极分化的社会现象。
在搜索引擎中，是指被搜索的多的，内容越多，被搜索的少的，内容越少。
与二八法则类似，但又不完全相同。

- 长尾效应 The long tail effect

![](/recommedation/01.jpg)

从人们需求的角度来看，大多数需求集中在头部，这部分我们就可以称之为流行。而分布在尾部的需求是个性化的、零散的、小量的需求，这部分的差异化需求会在需求曲线上形成一条长长的尾巴。

所谓的长尾效应就在于差异化需求的数量上，将所有非主流的市场累加起来就会形成一个比流行市场还要大的市场。

### 1.2 推荐系统的作用

- 高效的连接用户和物品，发现长尾商品
- 留住用户和内容生产者，实现商业目标

### 1.3 推荐系统的工作原理

**基于流行度的推荐：** 什么最火就推荐什么。

**基于内容相似性的协同过滤：** 利用“物品”的品质或内在属性进行推荐。比如音乐的流派、类型；电影的风格、类别；小说的类型、流派等等。不需要依赖用户对项目的评价，更多的需要用机器学习的方法从关于内容的特征描述的事例中得到用户感兴趣的资料。

**基于用户行为的协同过滤：**
（1）物以类聚，物品协同算法。如果有很多用户都对某两个物品有相似的偏好，那么说明这个物品是“相似”的，通过推荐用户喜欢过的物品的相似物品来提供个性化推荐。
（2）人以群分，用户协同算法。找到与用户兴趣相同的用户（有过类似的行为），将这些兴趣相同的用户浏览过的物品推荐给用户。

**混合算法：** 多种算法共同作用。

**基于模型的推荐：** 逻辑回归、FM、树模型、深度学习。

**因子分解：** SVD。

### 1.4 推荐系统 VS Web 系统

（1）Web 系统

1. 处理复杂逻辑，处理高并发，实现高可用，为用户提供稳定的服务，构建一个稳定的信息流通的服务。
2. 对结果有确定的预期。

（2）推荐系统

1. 追求指标增长，留存率/阅读时间/GMV（Gross Merchandise Volume 电商网站成交金额）/视频网站
2. 结果是概率问题。

## 二、推荐系统设计

### 2.1 推荐系统要素

- UI 和 UE（前端界面）
- 数据（Lambda 架构）
- 业务知识
- 推荐算法

### 2.2 推荐系统简略架构

![](/recommedation/02.png)

### 2.3 大数据 Lambda 架构

由 Twitter 工程师 Nathan Marz 提出。Lambda 系统架构提供了一个结合实时数据和 Hadoop 预先计算的数据环境和混合平台，提供一个实时的数据视图。

- 分层架构

  - 批处理层

    - 数据不可变，可以进行任何计算，可水平扩展
    - 高延迟，根据计算量和数据量的不同，几分钟~几小时
    - 日志收集 Flume
    - 分布式存储 Hadoop
    - 分布式计算 Hadoop MapReduce & spark
    - 视图存储数据库
      - NoSQL（HBase/Cassandra）
      - Redis/Memcache
      - MySQL

  - 实时处理层

    - 流式处理，持续计算
    - 存储和分析某个窗口期内的数据
    - 最终的正确性（Eventual Accuracy）
    - 实时数据收集 Flume & Kafka
    - 实时数据分析 Spark Streaming/Storm/Flink

  - 服务层
    - 支持随机读
    - 需要在非常短的时间内返回结果
    - 读取批处理层和实时处理层结果并对其归并

![](/recommedation/03_Lambda.png)

### 2.4 推荐算法架构

1. 召回阶段（海选）

   - 召回决定了最终推荐的天花板
   - 常用算法：
     - 协同过滤
     - 基于内容
     - 基于隐含语义

2. 排序阶段

   - 召回决定了推荐结果的天花板，排序逼近这个极限，决定了最终推荐的效果
   - CTR 预估（点击率预估，使用 LR 算法）估计用户是否会点击某个商品，需要用户的点击数据

3. 策略调整

![](/recommedation/04.png)

### 2.5 推荐系统完整架构

![](/recommedation/05.png)
